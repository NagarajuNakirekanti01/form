<div class="dialog-container">
  <h2 mat-dialog-title>{{ data ? 'Edit User' : 'Add New User' }}</h2>
  
  <mat-dialog-content>
    <form [formGroup]="userForm" class="user-form">
      <!-- Personal Information -->
      <div class="form-section">
        <h3>Personal Information</h3>
        <div class="form-row">
          <mat-form-field appearance="outline">
            <mat-label>First Name</mat-label>
            <input matInput formControlName="firstName" required>
            <mat-error *ngIf="userForm.get('firstName')?.hasError('required')">
              First name is required
            </mat-error>
          </mat-form-field>
          
          <mat-form-field appearance="outline">
            <mat-label>Last Name</mat-label>
            <input matInput formControlName="lastName" required>
            <mat-error *ngIf="userForm.get('lastName')?.hasError('required')">
              Last name is required
            </mat-error>
          </mat-form-field>
        </div>
        
        <div class="form-row">
          <mat-form-field appearance="outline">
            <mat-label>Email</mat-label>
            <input matInput formControlName="email" type="email" required>
            <mat-error *ngIf="userForm.get('email')?.hasError('required')">
              Email is required
            </mat-error>
            <mat-error *ngIf="userForm.get('email')?.hasError('email')">
              Please enter a valid email
            </mat-error>
          </mat-form-field>
          
          <mat-form-field appearance="outline">
            <mat-label>Phone</mat-label>
            <input matInput formControlName="phone" required>
            <mat-error *ngIf="userForm.get('phone')?.hasError('required')">
              Phone is required
            </mat-error>
          </mat-form-field>
        </div>
        
        <div class="form-row">
          <mat-form-field appearance="outline">
            <mat-label>Date of Birth</mat-label>
            <input matInput [matDatepicker]="dobPicker" formControlName="dateOfBirth" required>
            <mat-datepicker-toggle matSuffix [for]="dobPicker"></mat-datepicker-toggle>
            <mat-datepicker #dobPicker></mat-datepicker>
            <mat-error *ngIf="userForm.get('dateOfBirth')?.hasError('required')">
              Date of birth is required
            </mat-error>
          </mat-form-field>
          
          <mat-form-field appearance="outline">
            <mat-label>Gender</mat-label>
            <mat-select formControlName="gender" required>
              <mat-option value="male">Male</mat-option>
              <mat-option value="female">Female</mat-option>
              <mat-option value="other">Other</mat-option>
            </mat-select>
            <mat-error *ngIf="userForm.get('gender')?.hasError('required')">
              Gender is required
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      
      <!-- Work Information -->
      <div class="form-section">
        <h3>Work Information</h3>
        <div class="form-row">
          <mat-form-field appearance="outline">
            <mat-label>Department</mat-label>
            <mat-select formControlName="department" required>
              <mat-option value="Engineering">Engineering</mat-option>
              <mat-option value="Design">Design</mat-option>
              <mat-option value="Management">Management</mat-option>
              <mat-option value="Marketing">Marketing</mat-option>
              <mat-option value="Sales">Sales</mat-option>
              <mat-option value="HR">Human Resources</mat-option>
            </mat-select>
            <mat-error *ngIf="userForm.get('department')?.hasError('required')">
              Department is required
            </mat-error>
          </mat-form-field>
          
          <mat-form-field appearance="outline">
            <mat-label>Role</mat-label>
            <input matInput formControlName="role" required>
            <mat-error *ngIf="userForm.get('role')?.hasError('required')">
              Role is required
            </mat-error>
          </mat-form-field>
        </div>
        
        <div class="form-row">
          <mat-form-field appearance="outline">
            <mat-label>Join Date</mat-label>
            <input matInput [matDatepicker]="joinPicker" formControlName="joinDate" required>
            <mat-datepicker-toggle matSuffix [for]="joinPicker"></mat-datepicker-toggle>
            <mat-datepicker #joinPicker></mat-datepicker>
            <mat-error *ngIf="userForm.get('joinDate')?.hasError('required')">
              Join date is required
            </mat-error>
          </mat-form-field>
          
          <div class="status-field">
            <mat-slide-toggle formControlName="isActive" color="primary">
              {{ userForm.get('isActive')?.value ? 'Active' : 'Inactive' }}
            </mat-slide-toggle>
          </div>
        </div>
      </div>
      
      <!-- Form Validation Summary -->
      <div class="validation-summary" *ngIf="userForm.invalid && userForm.touched" [appShowHide]="userForm.invalid && userForm.touched">
        <mat-icon color="warn">warning</mat-icon>
        <span>Please fill in all required fields correctly</span>
      </div>
    </form>
  </mat-dialog-content>
  
  <mat-dialog-actions align="end">
    <button mat-button (click)="onCancel()">Cancel</button>
    <button mat-raised-button color="primary" (click)="onSave()" [disabled]="userForm.invalid">
      {{ data ? 'Update' : 'Create' }}
    </button>
  </mat-dialog-actions>
</div>